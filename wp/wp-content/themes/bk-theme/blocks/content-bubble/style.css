/*
bk-theme — content bubble
*/

/* ==========================================================
   Bubble Base
   ========================================================== */
.wp-block-bk-theme-content-bubble {
    background: inherit;
    /* respects editor background */
    border-radius: var(--bubble-radius, var(--wp--custom--radius--xl, 36px));
    padding: clamp(22px, 4vw, 48px);
    overflow: hidden;
    max-width: min(100%, var(--wp--style--global--content-size, 1200px));
    position: relative;
    box-shadow: 0 10px 28px rgba(0, 0, 0, .08);
}

/* Wide & Full alignment */
.wp-block-bk-theme-content-bubble.alignwide {
    max-width: var(--wp--style--global--wide-size, 1440px);
}

.wp-block-bk-theme-content-bubble.alignfull {
    width: 100%;
    max-width: none;
}

/* ==========================================================
   Corner Variations
   ========================================================== */
.wp-block-bk-theme-content-bubble.is-round-left {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
    margin-left: clamp(8px, 2vw, 20px) !important;
    margin-right: clamp(24px, 5vw, 60px) !important;
}

.wp-block-bk-theme-content-bubble.is-round-right {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
    margin-right: clamp(8px, 2vw, 20px) !important;
    margin-left: clamp(24px, 5vw, 60px) !important;
}

.wp-block-bk-theme-content-bubble.is-round-both {
    margin-inline: clamp(16px, 4vw, 40px) !important;
}

.wp-block-bk-theme-content-bubble:not(.is-round-left):not(.is-round-right):not(.is-round-both) {
    margin-inline: clamp(12px, 3vw, 24px) !important;
}

/* ==========================================================
   Allow Bleed (shadow background effect)
   ========================================================== */
.wp-block-bk-theme-content-bubble.is-style-allow-bleed {
    overflow: visible;
    position: relative;
}

.wp-block-bk-theme-content-bubble.is-style-allow-bleed::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: inherit;
    box-shadow: 0 10px 28px rgba(0, 0, 0, .08);
    z-index: -1;
    pointer-events: none;
}

.wp-block-bk-theme-content-bubble>* {
    position: relative;
    z-index: 1;
}

/* ==========================================================
   Flex Layout Inside Bubble
   ========================================================== */
.wp-block-bk-theme-content-bubble>.wp-block-group.is-layout-flex {
    display: flex;
    flex-wrap: nowrap;
    gap: clamp(20px, 4vw, 60px);
    align-items: center;
}

/* Default text column (40%) */
.wp-block-bk-theme-content-bubble>.wp-block-group.is-layout-flex>.wp-block-group:first-child {
    flex: 0 0 40%;
    max-width: 40%;
    min-width: 300px;
}

/* Default image column (60%) */
.wp-block-bk-theme-content-bubble>.wp-block-group.is-layout-flex>figure.wp-block-image {
    flex: 0 0 60%;
    max-width: 60%;
    min-width: 280px;
}

/* ==========================================================
   FIGURE & IMAGE FIXES
   ========================================================== */
.wp-block-bk-theme-content-bubble figure.wp-block-image[style] {
    width: auto !important;
    max-width: none !important;
    flex: 1 1 auto !important;
}

.wp-block-bk-theme-content-bubble figure.wp-block-image img {
    display: block;
    height: auto !important;
    max-width: 100% !important;
    filter: drop-shadow(0 10px 24px rgba(0, 0, 0, .15));
}

.wp-block-bk-theme-content-bubble figure.wp-block-image[style] img {
    width: auto !important;
    max-width: 100% !important;
    height: auto !important;
}

/* ==========================================================
   TEXT WIDTH VARIATIONS
   ========================================================== */
.wp-block-bk-theme-content-bubble.is-style-text-narrow>.wp-block-group.is-layout-flex>.wp-block-group:first-child {
    flex: 0 0 40%;
    max-width: 40%;
}

.wp-block-bk-theme-content-bubble.is-style-text-narrow>.wp-block-group.is-layout-flex>figure.wp-block-image {
    flex: 0 0 60%;
    max-width: 60%;
}

.wp-block-bk-theme-content-bubble.is-style-text-wide>.wp-block-group.is-layout-flex>.wp-block-group:first-child {
    flex: 0 0 60%;
    max-width: 60%;
}

.wp-block-bk-theme-content-bubble.is-style-text-wide>.wp-block-group.is-layout-flex>figure.wp-block-image {
    flex: 0 0 40%;
    max-width: 40%;
}

/* ==========================================================
   Bubble Bleed (desktop only)
   ========================================================== */
.wp-block-bk-theme-content-bubble.is-style-bubble-bleed-right,
.wp-block-bk-theme-content-bubble.is-style-bubble-bleed-left,
.wp-block-bk-theme-content-bubble.is-style-bubble-bleed-both {
    position: relative;
    width: 100%;
    max-width: 100vw;
    overflow: visible;
}

/* Right bleed */
.wp-block-bk-theme-content-bubble.is-style-bubble-bleed-right {
    margin-right: -400px;
}

/* Left bleed */
.wp-block-bk-theme-content-bubble.is-style-bubble-bleed-left {
    margin-left: -400px;
    padding-left: 400px;
}

/* Both sides */
.wp-block-bk-theme-content-bubble.is-style-bubble-bleed-both {
    margin-inline: -400px;
    padding-inline: 400px;
}

/* ==========================================================
   Responsive adjustments
   ========================================================== */
@media (max-width: 1200px) {
    .wp-block-bk-theme-content-bubble.is-style-bubble-bleed-right {
        margin-right: -200px;
        padding-right: 200px;
    }

    .wp-block-bk-theme-content-bubble.is-style-bubble-bleed-left {
        margin-left: -200px;
        padding-left: 200px;
    }

    .wp-block-bk-theme-content-bubble.is-style-bubble-bleed-both {
        margin-inline: -200px;
        padding-inline: 200px;
    }
}

@media (max-width: 1024px) {

    /* Kill all container bleeds */
    .wp-block-bk-theme-content-bubble.is-style-bubble-bleed-right,
    .wp-block-bk-theme-content-bubble.is-style-bubble-bleed-left,
    .wp-block-bk-theme-content-bubble.is-style-bubble-bleed-both {
        margin: 0 !important;
        padding: clamp(22px, 4vw, 48px) !important;
        max-width: 100% !important;
    }

    /* Stack layout */
    .wp-block-bk-theme-content-bubble>.wp-block-group.is-layout-flex {
        flex-wrap: wrap;
    }

    .wp-block-bk-theme-content-bubble>.wp-block-group.is-layout-flex>.wp-block-group:first-child {
        flex-basis: 100%;
        max-width: 100%;
        order: 1;
    }

    .wp-block-bk-theme-content-bubble>.wp-block-group.is-layout-flex>figure.wp-block-image {
        flex-basis: 100%;
        max-width: 100%;
        order: 2;
    }

    .wp-block-bk-theme-content-bubble figure.wp-block-image[class*="is-style-bleed"] {
        margin: 0 !important;
        max-width: 100% !important;
        flex: 1 1 100% !important;
    }

    .wp-block-bk-theme-content-bubble figure.wp-block-image img {
        width: 100% !important;
        max-width: 100% !important;
        height: auto !important;
        display: block;
    }
}

@media (max-width: 768px) {

    /* Reset image bleeds */
    .wp-block-bk-theme-content-bubble figure.wp-block-image[class*="is-style-bleed"] {
        margin-left: 0 !important;
        margin-right: 0 !important;
        max-width: 100% !important;
    }

    /* Contain images safely */
    .wp-block-bk-theme-content-bubble figure.wp-block-image img {
        width: 100% !important;
        max-width: 100% !important;
        height: auto !important;
    }

    .wp-block-bk-theme-content-bubble figure.wp-block-image[class*="is-style-bleed"] {
        margin: 0 auto !important;
        display: block !important;
    }
}

/* ==========================================================
   Equal-height Bubble with Side Image
   ========================================================== */

/* Equal-height Bubble with Side Image */
.wp-block-bk-theme-content-bubble.is-equal-height {
    position: relative;
    --bubble-image-width: 50%;
    padding: 0;
    /* remove all padding from the bubble */
}

/* TEXT AREA — add back padding on left + vertical */
.wp-block-bk-theme-content-bubble.is-equal-height>.wp-block-group.is-layout-flow {
    padding: clamp(22px, 4vw, 48px);
    /* normal padding */
    padding-right: 0;
    /* no right padding, image covers that */
    box-sizing: border-box;
    width: calc(100% - var(--bubble-image-width));
    max-width: calc(100% - var(--bubble-image-width));
    position: relative;
    z-index: 1;
}

/* IMAGE AREA — flush to bubble edges */
.wp-block-bk-theme-content-bubble.is-equal-height figure.wp-block-image {
    position: absolute !important;
    top: 0;
    right: 0;
    bottom: 0;
    margin: 0 !important;
    width: var(--bubble-image-width) !important;
    height: 100% !important;
    overflow: hidden;
    border-top-right-radius: inherit;
    border-bottom-right-radius: inherit;
    z-index: 0;
    display: block;
}

/* IMAGE fills box */
.wp-block-bk-theme-content-bubble.is-equal-height figure.wp-block-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    border-radius: inherit;
    display: block;
}

/* IMAGE AREA — guaranteed flush right */
.wp-block-bk-theme-content-bubble.is-equal-height figure.wp-block-image {
    position: absolute !important;
    top: 0;
    bottom: 0;
    right: 0;
    /* stick to right edge */
    left: auto;
    /* don’t anchor left */
    margin: 0 !important;
    width: 50% !important;
    /* take right half */
    height: 100% !important;
    overflow: hidden;
    border-top-right-radius: inherit;
    border-bottom-right-radius: inherit;
    z-index: 0;
    display: block;
}

/* TEXT AREA — restricted to left half */
.wp-block-bk-theme-content-bubble.is-equal-height>.wp-block-group.is-layout-flow {
    width: 50%;
    max-width: 50%;
    padding: clamp(22px, 4vw, 48px);
    box-sizing: border-box;
    position: relative;
    z-index: 1;
}